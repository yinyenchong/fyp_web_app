<% provide(:title, 'Chat Index') %>

<div class="show-content1">
    <div id="room_container">
    
        <div class="nav" ><%= current_user.name %></div>
        
        <div class="nav-user" >Users<%= turbo_stream_from "users" %></div>
        
        <%= turbo_stream_from "users" %>
        
        <div id="users">
            <%= render @users.without_students %>
        </div>
    
    </div>
    
    <div class="chat-area">
     
        <% if @single_room %>
            <div id="single_room">
                <h4 class="chat-area-title"> <%= @user&.name || @single_room.name %> </h4>
                
                <%= turbo_stream_from @single_room %>
                
                <div id="messages" data-controller="scroll">
                    
                    <%= turbo_frame_tag "page_handler" %>
                    <%= render "messages/pager", pagy: @pagy %>
                    
                    <div id="messages-container">
                        <%= render @messages %>
                    </div>
                
                </div>
                    <%= render 'messages/new_message_form' %>
                </div>
        <% end %>

     
    </div>
</div>